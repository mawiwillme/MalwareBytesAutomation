package Scheduler;

import org.apache.log4j.BasicConfigurator;
import org.quartz.*;
import org.quartz.impl.StdSchedulerFactory;
import static org.quartz.JobBuilder.*;
import static org.quartz.TriggerBuilder.*;
import static org.quartz.SimpleScheduleBuilder.*;

/**
 * @author markw
 */
public class CronTab {

    public CronTab() throws InterruptedException, SchedulerException {
        mbamTrigger();
    }

    public void mbamTrigger() throws SchedulerException, InterruptedException {
        BasicConfigurator.configure();
        Scheduler scheduler = StdSchedulerFactory.getDefaultScheduler();

        scheduler.start();

        JobDetail job = newJob(MalwareBytesJob.class)
                .withIdentity("malJob","group1")
                .build();

        Trigger trigger = newTrigger()
                .withIdentity("malJob","group1")
                .startNow()
                .withSchedule(CronScheduleBuilder.dailyAtHourAndMinute(14,0))
                .build();

        scheduler.scheduleJob(job,trigger);

        while(true){
            Thread.sleep(1000);
        }
    }

    public static void main(String[] args) throws SchedulerException, InterruptedException {
        CronTab tab = new CronTab();
    }
}
